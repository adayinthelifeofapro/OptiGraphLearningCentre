@using System.Text.Json

<div class="code-block overflow-auto max-h-96 scrollbar-thin">
    @if (string.IsNullOrWhiteSpace(Json))
    {
        <span class="text-gray-500 italic">No data to display</span>
    }
    else
    {
        <pre class="text-sm">@FormattedJson</pre>
    }
</div>

@code {
    [Parameter]
    public string? Json { get; set; }

    [Parameter]
    public int MaxHeight { get; set; } = 400;

    private string FormattedJson
    {
        get
        {
            if (string.IsNullOrWhiteSpace(Json))
                return string.Empty;

            try
            {
                var doc = JsonDocument.Parse(Json);
                return JsonSerializer.Serialize(doc, new JsonSerializerOptions
                {
                    WriteIndented = true
                });
            }
            catch
            {
                return Json;
            }
        }
    }
}
